---
---

## Lesson Objectives

- Learn several functions and packages for statistical modeling in R
- Understand "formulas" of model specification
- Introduce simple and complex "linear", regression models

===

## Lesson Non-objectives

This lesson does *not* cover the following topics related to statistical modeling. These should be considered carefully when analyzing data.
{:.notes}

- Experimental/sampling design
- Model validation
- Hypothesis tests
- Model comparison

===

## Specific Achievements

- Write a simple linear formula using `lm` function.
- Write a linear formula with a non-gaussian family using the `glm` function.
- Add a "random effect" into a linear formula using the a `lmer` package

===

## Dataset

The dataset you will plot is an example of Public Use Microdata Sample (PUMS)
produced by the US Census Beaurea.

```{r, handout = 0, message = FALSE}
library(readr)
library(dplyr)

person <- read_csv(
  file = 'data/census_pums/sample.csv',
  col_types = cols_only(
    AGEP = 'i',  # Age
    WAGP = 'd',  # Wages or salary income past 12 months
    SCHL = 'i',  # Educational attainment
    SEX = 'f',   # Sex
    OCCP = 'f',  # Occupation recode based on 2010 OCC codes
    WKHP = 'i')) # Usual hours worked per week past 12 months
```

This CSV file contains individualsâ€™ anonymized responses to the 5 Year American
Community Survey (ACS) completed in 2017. There are over a hundred variables
giving individual level data on household members income, education, employment,
ethnicity, and much more. The [technical documentation] provided the data
definitions quoted above in comments.
{:.notes}

===

Collapse the education attainment levels for this lesson, and remove non
wage-earners as well as the "top coded" individuals whose income is annonymized.

```{r, handout = 0}
person <- within(person, {
  SCHL <- factor(SCHL)
  levels(SCHL) <- list(
    'Incomplete' = c(1:15),
    'High School' = 16,
    'College Credit' = 17:20,
    'Bachelor\'s' = 21,
    'Master\'s' = 22:23,
    'Doctorate' = 24)}) %>%
  filter(
    WAGP > 0,
    WAGP < max(WAGP, na.rm = TRUE))
```

[technical documentation]: https://www.census.gov/programs-surveys/acs/technical-documentation/pums/documentation.html